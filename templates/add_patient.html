{% extends "layout_modern.html" %}

{% block title %}Add Patient - Oncobloom{% endblock %}

{% block page_title %}Register New Patient{% endblock %}

{% block content %}
<div class="fade-in">
    <div class="row mb-4">
        <div class="col-12">
            <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary mb-3">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>
    </div>

    <form method="POST" action="{{ url_for('add_patient') }}">
        <!-- Personal Information Section -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-user"></i> 1️⃣ Personal Information</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="full_name" class="form-label">Full Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="full_name" name="full_name" required>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="age" class="form-label">Age <span class="text-danger">*</span></label>
                        <input type="number" class="form-control" id="age" name="age" min="1" max="150" required>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="gender" class="form-label">Gender <span class="text-danger">*</span></label>
                        <select class="form-select" id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="blood_group" class="form-label">Blood Group</label>
                        <select class="form-select" id="blood_group" name="blood_group">
                            <option value="">Select Blood Group</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="contact_number" class="form-label">Contact Number</label>
                        <input type="tel" class="form-control" id="contact_number" name="contact_number">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="city" class="form-label">City</label>
                        <input type="text" class="form-control" id="city" name="city">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="state" class="form-label">State</label>
                        <input type="text" class="form-control" id="state" name="state">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="emergency_contact_name" class="form-label">Emergency Contact Name</label>
                        <input type="text" class="form-control" id="emergency_contact_name" name="emergency_contact_name">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="emergency_contact_number" class="form-label">Emergency Contact Number</label>
                        <input type="tel" class="form-control" id="emergency_contact_number" name="emergency_contact_number">
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagnosis Details Section -->
        <div class="card mb-4">
            <div class="card-header bg-danger text-white">
                <h5 class="mb-0"><i class="fas fa-stethoscope"></i> 2️⃣ Diagnosis Details</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="cancer_type" class="form-label">Cancer Type <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="cancer_type" name="cancer_type" placeholder="e.g., Lung Cancer, Breast Cancer" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="cancer_stage" class="form-label">Cancer Stage <span class="text-danger">*</span></label>
                        <select class="form-select" id="cancer_stage" name="cancer_stage" required>
                            <option value="">Select Stage</option>
                            <option value="Stage I">Stage I</option>
                            <option value="Stage II">Stage II</option>
                            <option value="Stage III">Stage III</option>
                            <option value="Stage IV">Stage IV</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="diagnosis_date" class="form-label">Diagnosis Date <span class="text-danger">*</span></label>
                        <input type="date" class="form-control" id="diagnosis_date" name="diagnosis_date" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="tumor_size" class="form-label">Tumor Size (cm)</label>
                        <input type="number" class="form-control" id="tumor_size" name="tumor_size" step="0.1" min="0">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="metastasis" class="form-label">Metastasis</label>
                        <select class="form-select" id="metastasis" name="metastasis">
                            <option value="">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Treatment Details Section -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-hospital"></i> 3️⃣ Treatment Details</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="treatment_type" class="form-label">Treatment Type</label>
                        <input type="text" class="form-control" id="treatment_type" name="treatment_type" placeholder="e.g., Chemotherapy, Radiation, Surgery">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="treatment_phase" class="form-label">Treatment Phase</label>
                        <select class="form-select" id="treatment_phase" name="treatment_phase">
                            <option value="">Select Phase</option>
                            <option value="Pre-treatment">Pre-treatment</option>
                            <option value="Active Treatment">Active Treatment</option>
                            <option value="Post-treatment">Post-treatment</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Follow-up">Follow-up</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="surgery_status" class="form-label">Surgery Status</label>
                        <select class="form-select" id="surgery_status" name="surgery_status">
                            <option value="">Select Status</option>
                            <option value="Not Required">Not Required</option>
                            <option value="Planned">Planned</option>
                            <option value="Completed">Completed</option>
                            <option value="In Recovery">In Recovery</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="chemo_cycles_planned" class="form-label">Chemo Cycles Planned</label>
                        <input type="number" class="form-control" id="chemo_cycles_planned" name="chemo_cycles_planned" min="0">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="chemo_cycles_completed" class="form-label">Chemo Cycles Completed</label>
                        <input type="number" class="form-control" id="chemo_cycles_completed" name="chemo_cycles_completed" min="0">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="radiation_sessions_planned" class="form-label">Radiation Sessions Planned</label>
                        <input type="number" class="form-control" id="radiation_sessions_planned" name="radiation_sessions_planned" min="0">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="radiation_sessions_completed" class="form-label">Radiation Sessions Completed</label>
                        <input type="number" class="form-control" id="radiation_sessions_completed" name="radiation_sessions_completed" min="0">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="doctor_name" class="form-label">Doctor Name</label>
                        <input type="text" class="form-control" id="doctor_name" name="doctor_name">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="hospital_name" class="form-label">Hospital Name</label>
                        <input type="text" class="form-control" id="hospital_name" name="hospital_name">
                    </div>
                </div>
            </div>
        </div>

        <!-- Medical Monitoring Section -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0"><i class="fas fa-heartbeat"></i> 4️⃣ Medical Monitoring</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="height" class="form-label">Height (cm)</label>
                        <input type="number" class="form-control" id="height" name="height" step="0.1" min="0">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="weight" class="form-label">Weight (kg)</label>
                        <input type="number" class="form-control" id="weight" name="weight" step="0.1" min="0">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="blood_pressure" class="form-label">Blood Pressure</label>
                        <input type="text" class="form-control" id="blood_pressure" name="blood_pressure" placeholder="e.g., 120/80">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="heart_rate" class="form-label">Heart Rate (bpm)</label>
                        <input type="number" class="form-control" id="heart_rate" name="heart_rate" min="0">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="next_appointment" class="form-label">Next Appointment</label>
                        <input type="date" class="form-control" id="next_appointment" name="next_appointment">
                    </div>
                </div>
            </div>
        </div>

        <!-- Status & Risk Section -->
        <div class="card mb-4">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0"><i class="fas fa-exclamation-triangle"></i> 5️⃣ Status & Risk Assessment</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="risk_level" class="form-label">Risk Level</label>
                        <select class="form-select" id="risk_level" name="risk_level">
                            <option value="">Select Risk Level</option>
                            <option value="Low">Low</option>
                            <option value="Moderate">Moderate</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="current_status" class="form-label">Current Status <span class="text-danger">*</span></label>
                        <select class="form-select" id="current_status" name="current_status" required>
                            <option value="">Select Status</option>
                            <option value="Active Treatment">Active Treatment</option>
                            <option value="Recovered">Recovered</option>
                            <option value="Critical">Critical</option>
                            <option value="Under Observation">Under Observation</option>
                            <option value="Remission">Remission</option>
                            <option value="Terminal">Terminal</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Buttons -->
        <div class="row mb-4">
            <div class="col-12">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-user-plus"></i> Register Patient
                </button>
                <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary btn-lg ms-2">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
