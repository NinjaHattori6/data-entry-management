admin.html
{% extends "layout.html" %}
{% block title %}Admin Panel | Data Entry Management System{% endblock %}

{% block content %}

<div class="container-fluid py-5">

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show text-center" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- Header -->
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">
      <i class="fa-solid fa-user-shield me-2"></i>Admin Dashboard
    </h2>
    <p class="text-muted">Manage all registered users and monitor their data entries.</p>
  </div>

  <!-- Admin Controls -->
  <div class="card shadow border-0 rounded-4 p-4">
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
      <h5 class="fw-bold text-primary mb-2">
        <i class="fa-solid fa-users me-2"></i>Registered Users
      </h5>
      <a href="{{ url_for('dashboard') }}" class="btn btn-secondary btn-sm fw-semibold">
        <i class="fa-solid fa-arrow-left me-1"></i>Back to Dashboard
      </a>
    </div>

    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead class="table-primary">
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
            <th>Entry Count</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user['id'] }}</td>
            <td>{{ user['username'] }}</td>
            <td>{{ user['email'] }}</td>
            <td>{{ user['entry_count'] }}</td>

            <!-- ðŸ”¹ Make Admin Button or Admin Badge -->
            <td>
              {% if not user['is_admin'] %}
                <a href="{{ url_for('make_admin', user_id=user['id']) }}"
                   class="btn btn-sm btn-success">
                  Make Admin
                </a>
              {% else %}
                <span class="badge bg-primary">Admin</span>
              {% endif %}
            </td>

            <!-- ðŸ”¹ Delete User Button -->
            <td>
              {% if user['id'] != session['user_id'] %}
              <a href="#" class="btn btn-sm btn-danger"
                 onclick="return confirm('Are you sure you want to delete this user and their entries?');">
                 <i class="fa-solid fa-trash"></i> Delete
              </a>
              {% else %}
              <span class="badge bg-success">You</span>
              {% endif %}
            </td>
          </tr>
          {% else %}
          <tr><td colspan="6" class="text-center text-muted">No users found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>

{% endblock %}

